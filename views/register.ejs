<!doctype html>
<html lang="en">

<head>
    <%- include ('includes/header.html') %>
</head>

<body>
    <%- include ('includes/navigation.ejs') %>
    <div class='container' style='min-height: 450px'>
        <div class='row'>
            <div class='col-md-12'>

                <div class='row'>
                    <div class='col-md-6 col-md-offset-3'>
                        <div class='page-header'>
                            <h2>Register</h2>
                        </div>
                        <div class="form-group">
                            <label for="InputEmail1">Username</label>
                            <input type="text" class="form-control" id="username" placeholder="Enter email">
                        </div>
                        <div class="form-group">
                            <label for="InputEmail1">Email address</label>
                            <input type="email" class="form-control" id="email" placeholder="Enter email">
                        </div>
                        <div class="form-group">
                            <label for="InputPassword">Password</label>
                            <input type="password" class="form-control" id="password" placeholder="Password">
                        </div>
                        <button type="submit" onclick="register()" class="btn btn-primary">Submit</button>

                        <script>
                            function register() {
                                console.log('test');
                                var username = document.getElementById('username').value;
                                var email = document.getElementById('email').value;
                                var password = document.getElementById('password').value;

                                var xhr = new XMLHttpRequest();
                                xhr.onreadystatechange = function () {
                                    if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
                                        window.location = '/';
                                    }
                                }
                                const data = 'username=' + username + '&email=' + email + '&password=' + password;
                                xhr.open('POST', 'http://tauheedkhan.com/register', true);
                                xhr.withCredentials = true;
                                xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
                                xhr.send(data);
                            }
                        </script>
</body>

</html>